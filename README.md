# Космический Телеграм

Проект направлен на автоматизацию скачиваний фотографий космоса из различных ресурсов. Второе его применение - загрузка фотографий в канал Telegram с помощью бота.

**Набор скриптов проекта:**

- Скачивает фото запуска SpaceX
- Скачивает EPIC-фото от NASA
- Скачивает APOD-фото от NASA
- Публикует указанную фотографию в канал. Если “какую” не указано, публикует случайную фотографию.
- Публикует все фото из директории в бесконечном цикле
- Вспомогательные скрипты

## Как установить

Python3 должен быть уже установлен. Затем используйте pip (или pip3, есть конфликт с Python2) для установки зависимостей:

```sh
pip install -r requirements.txt
```

## Работа со скриптами фотографий космоса:

> ### fetch_nasa.py
Для скачивания астрономических фотографий, вам потребуется API-токен с сайта [NASA](https://api.nasa.gov/). Выглядеть он будет примерно так:

`
A5hprV1EZOAqsg4R9dqNqvCkzNRp2f5UdsflbtHv
`

После получения токена, его нужно прописать в файле `.env`.
Записать файл нужно в виде:

```python
NASA_API_KEY=токен
```

Cтрока `load_dotenv()` в коде берет файл `.env` из текущего каталога и настраивает переменные окружения, которые прописаны в данном файле.
Токен необходимо указать в параметрах для доступа к космической фототеке. Пример использования:

```python
    link_epic = "https://api.nasa.gov/EPIC/api/natural/image"
    params = {
        "nasa_key": NASA_API_KEY
    }
```

В файл `.env` также необходимо прописать название для будущей папки, в которой будут храниться фотографии.

```python
FOLDER_NASA=nasa
```

Пример использования скрипта в командной строке:
```sh
python fetch_nasa.py
```

> ### fetch_nasa_epic.py
Для скачивания фотографий земли нам потребуется поместить в файл `.env` api-key с сайта NASA и название папки, предназначенной для фотографий epic. 

```python
FOLDER_EPIC=epic 
NASA_API_KEY=токен
```

Пример использования скрипта в командной строке:
```sh
python fetch_nasa_epic.py
```
В результате данной команды, в указанную в `FOLDER_EPIC` папку попадут актуальные снимки Земли NASA. 

> ### fetch_spacex_last_launch.py
Необходимые файлы в `.env`: API-токен c сайта NASA,  и название папки, предназначенной для фотографий последнего запуска SpaceX NASA.

```python
FOLDER_SPACEX=spacex
NASA_API_KEY=токен
```

Для запуска скрипта требуется аргумент [-id_spacex], означающий id нужного запуска в космос [SpaceX](https://api.spacexdata.com/v5/launches/).
Пример использования скрипта в командной строке:
```sh
python fetch_spacex_last_launch.py 5eb87d04ffd86e000604b353
```
Загружает фотографии нужного запуска в указанную директорию. 
При неправильном id, загружает фото последнего запуска по умолчанию. 

> ### download_image.py
Скрипт скачивания фотографий. Вынесен как отельный файл по принципу разработки DRY. 
Во избежание повторения части кода, импортирован в файлы:

```python
import download_image
```

Использование в коде:

```python
download_image.get_image(link, file_path)
```

## Работа со скриптами telegram:

> ## tg_bot_all_images.py
Переменные окружения, которые требуются для запуска скрипта:
Токен твоего бота, который можно получить в телеграме у [BotFather](https://t.me/BotFather). Записывается в `.env` в виде:

```python
TG_BOT_TOKEN=токен
```

Чат-айди своего телеграм-канала, который можно найти в шапке профиля. Запись в `.env` в виде:
```python
TG_CHAT_ID=@айди
```

Необязательные настройки скрипта:
- Аргумент [--hours] - числовая переменная, имеющая значение временного промежутка между рассылками фото в часах (по умолчанию, имела 4).
Пример использования скрипта в командной строке:
```sh
python tg_bot_all_images.py --hours 3
```
В телеграм канал придут фотографии космоса в рандомном порядке по одной в указанный промежуток. Следующая рассылка фотографий произойдет через указанное время. 

- Аргумент [--path], означающий папку, из которой брать фотографии для рассылки. 
```sh
python tg_bot_all_image.py --path images
```


> ## tg_bot_random_image.py
Требуемые для запуска скрипта `.env`:

```python
TG_BOT_TOKEN=токен
TG_CHAT_ID=@айди
```

Для запуска скрипта могут потребоваться дополнительные настройки:
- Aргумент [--img],  c названием файла. 
Пример использования скрипта в командной строке:
```sh
 python tg_bot_random_image.py --img nasa12.jpg
```
- Аргумент [--path], означающий папку, из которой брать фотографию. 
```sh
python tg_bot_random_image.py --path images --img nasa12.jpg
```
Пример использования для любой директории со своего ПК с указанием полного пути:
```sh
python tg_bot_random_image.py --path C:\Users\Admin\Desktop\Фото\1 --img 1.jpg
```
В случае, если путь указан неверно, в канал будет отправлено рандомное фото космоса. 

> ### image_files_listdir.py
Скрипт возвращает список, содержащий имена записей в каталоге, указанном путем (Path). В нашем случае, фотографий космоса. Вынесен как отельный файл по принципу разработки DRY. Во избежание повторения части кода, импортирован в файлы:

```python
import image_files_listdir
```

## Переменные окружения проекта

| TITLE | PURPOSE |
| ------ | ------ |
| TG_CHAT_ID |твоего канала в telegram |
| TG_BOT_TOKEN | токен твоего чат-бота в telegram |
| NASA_API_KEY | токен с сайта NASA для доступа к фото |

## Цель проекта
Код написан в образовательных целях на онлайн-курсе для веб-разработчиков  [dvmn.org.](https://dvmn.org/)
